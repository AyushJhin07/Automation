{
  "id": "hubspot",
  "name": "HubSpot",
  "description": "Sync contacts, companies, and deals with HubSpot CRM",
  "category": "CRM",
  "icon": "hubspot",
  "color": "#FF7A59",
  "authentication": {
    "type": "oauth2",
    "config": {
      "authUrl": "https://app.hubspot.com/oauth/authorize",
      "tokenUrl": "https://api.hubapi.com/oauth/v1/token",
      "scopes": [
        "crm.objects.contacts.read",
        "crm.objects.contacts.write",
        "crm.objects.deals.read",
        "crm.objects.deals.write"
      ]
    }
  },
  "baseUrl": "https://api.hubapi.com",
  "testConnection": {
    "endpoint": "/crm/v3/owners",
    "method": "GET"
  },
  "actions": [
    {
      "id": "create_contact",
      "name": "Create Contact",
      "description": "Create a new contact",
      "endpoint": "/crm/v3/objects/contacts",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "properties": {
            "type": "object",
            "description": "Contact properties to set"
          }
        },
        "required": ["properties"],
        "additionalProperties": false
      }
    },
    {
      "id": "update_contact",
      "name": "Update Contact",
      "description": "Update properties for an existing contact",
      "endpoint": "/crm/v3/objects/contacts/{contactId}",
      "method": "PATCH",
      "parameters": {
        "type": "object",
        "properties": {
          "contactId": { "type": "string" },
          "properties": { "type": "object" }
        },
        "required": ["contactId", "properties"],
        "additionalProperties": false
      }
    },
    {
      "id": "search_contacts",
      "name": "Search Contacts",
      "description": "Search for contacts",
      "endpoint": "/crm/v3/objects/contacts/search",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "query": { "type": "string" },
          "limit": { "type": "number", "default": 10, "minimum": 1, "maximum": 100 }
        },
        "required": [],
        "additionalProperties": false
      }
    },
    {
      "id": "create_deal",
      "name": "Create Deal",
      "description": "Create a new deal",
      "endpoint": "/crm/v3/objects/deals",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "properties": { "type": "object" }
        },
        "required": ["properties"],
        "additionalProperties": false
      }
    },
    {
      "id": "update_deal",
      "name": "Update Deal",
      "description": "Update an existing deal",
      "endpoint": "/crm/v3/objects/deals/{dealId}",
      "method": "PATCH",
      "parameters": {
        "type": "object",
        "properties": {
          "dealId": { "type": "string" },
          "properties": { "type": "object" }
        },
        "required": ["dealId", "properties"],
        "additionalProperties": false
      }
    }
  ],
  "triggers": [
    {
      "id": "contact_created",
      "name": "Contact Created",
      "description": "Triggered when a new contact is created",
      "type": "webhook",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "properties": { "type": "object" }
        }
      }
    },
    {
      "id": "deal_stage_changed",
      "name": "Deal Stage Changed",
      "description": "Triggered when a deal changes stage",
      "type": "webhook",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "properties": { "type": "object" }
        }
      }
    }
  ]
}
