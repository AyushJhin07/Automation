{
  "id": "zendesk",
  "name": "Zendesk",
  "description": "Manage support tickets in Zendesk",
  "category": "Customer Support",
  "icon": "zendesk",
  "color": "#03363D",
  "authentication": {
    "type": "oauth2",
    "config": {
      "authUrl": "https://{subdomain}.zendesk.com/oauth/authorizations/new",
      "tokenUrl": "https://{subdomain}.zendesk.com/oauth/tokens",
      "clientIdRequired": true,
      "clientSecretRequired": true,
      "scopes": ["read", "write"]
    }
  },
  "baseUrl": "https://{subdomain}.zendesk.com/api/v2",
  "testConnection": {
    "endpoint": "/users/me.json",
    "method": "GET"
  },
  "actions": [
    {
      "id": "create_ticket",
      "name": "Create Ticket",
      "description": "Create a new support ticket",
      "endpoint": "/tickets.json",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "ticket": {
            "type": "object",
            "properties": {
              "subject": { "type": "string" },
              "comment": {
                "type": "object",
                "properties": {
                  "body": { "type": "string" }
                },
                "required": ["body"],
                "additionalProperties": false
              },
              "requester": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "email": { "type": "string" }
                },
                "additionalProperties": false
              },
              "priority": { "type": "string" }
            },
            "required": ["subject", "comment"],
            "additionalProperties": false
          }
        },
        "required": ["ticket"],
        "additionalProperties": false
      }
    },
    {
      "id": "update_ticket",
      "name": "Update Ticket",
      "description": "Update fields on an existing ticket",
      "endpoint": "/tickets/{ticketId}.json",
      "method": "PUT",
      "parameters": {
        "type": "object",
        "properties": {
          "ticketId": { "type": "string" },
          "ticket": { "type": "object" }
        },
        "required": ["ticketId", "ticket"],
        "additionalProperties": false
      }
    },
    {
      "id": "list_tickets",
      "name": "List Tickets",
      "description": "List tickets",
      "endpoint": "/tickets.json",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {
          "page": { "type": "number", "default": 1 },
          "per_page": { "type": "number", "default": 25, "minimum": 1, "maximum": 100 }
        },
        "required": [],
        "additionalProperties": false
      }
    }
  ],
  "triggers": [
    {
      "id": "ticket_created",
      "name": "Ticket Created",
      "description": "Triggered when a ticket is created",
      "type": "webhook",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "id": { "type": "number" },
          "subject": { "type": "string" },
          "status": { "type": "string" }
        }
      }
    }
  ]
}
