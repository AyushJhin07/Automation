{
  "id": "notion-create-page",
  "description": "Creates a Notion page using the Apps Script runtime and records response metadata.",
  "graph": {
    "id": "fixture-notion-create-page",
    "name": "Notion create page",
    "nodes": [
      {
        "id": "notion-action",
        "type": "action.notion",
        "app": "notion",
        "name": "Create Notion page",
        "op": "action.notion:create_page",
        "params": {
          "operation": "create_page",
          "parent": {
            "type": "database_id"
          },
          "properties": {
            "Name": {
              "title": [
                {
                  "text": {
                    "content": "{{pageTitle}}"
                  }
                }
              ]
            }
          }
        },
        "data": {
          "operation": "create_page",
          "config": {
            "parent": {
              "type": "database_id"
            },
            "properties": {
              "Name": {
                "title": [
                  {
                    "text": {
                      "content": "{{pageTitle}}"
                    }
                  }
                ]
              }
            },
            "children": [
              {
                "type": "paragraph",
                "paragraph": {
                  "text": [
                    {
                      "type": "text",
                      "text": {
                        "content": "Summary: {{summary}}"
                      }
                    }
                  ]
                }
              }
            ],
            "icon": {
              "type": "emoji",
              "emoji": "⚡"
            },
            "cover": {
              "type": "external",
              "external": {
                "url": "https://example.com/cover.png"
              }
            }
          }
        }
      }
    ],
    "edges": []
  },
  "entry": {
    "context": {
      "pageTitle": "Release Notes",
      "summary": "Key fixes and enhancements"
    }
  },
  "secrets": {
    "NOTION_ACCESS_TOKEN": "secret-notion-token",
    "NOTION_DATABASE_ID": "db-test-123"
  },
  "http": [
    {
      "name": "notion-create-page",
      "request": {
        "url": "https://api.notion.com/v1/pages",
        "method": "POST",
        "headers": {
          "authorization": "Bearer secret-notion-token",
          "content-type": "application/json",
          "notion-version": "2022-06-28"
        },
        "payload": {
          "parent": {
            "database_id": "db-test-123"
          },
          "properties": {
            "Name": {
              "title": [
                {
                  "text": {
                    "content": "Release Notes"
                  }
                }
              ]
            }
          },
          "children": [
            {
              "type": "paragraph",
              "paragraph": {
                "text": [
                  {
                    "type": "text",
                    "text": {
                      "content": "Summary: Key fixes and enhancements"
                    }
                  }
                ]
              }
            }
          ],
          "icon": {
            "type": "emoji",
            "emoji": "⚡"
          },
          "cover": {
            "type": "external",
            "external": {
              "url": "https://example.com/cover.png"
            }
          }
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "X-Request-Id": "req-notion-1"
        },
        "body": {
          "id": "page-123",
          "url": "https://www.notion.so/Test-Page",
          "created_time": "2024-01-01T00:00:00.000Z",
          "parent": {
            "database_id": "db-test-123"
          }
        }
      }
    }
  ],
  "expect": {
    "context": {
      "pageTitle": "Release Notes",
      "summary": "Key fixes and enhancements",
      "notionPageId": "page-123",
      "notionPageUrl": "https://www.notion.so/Test-Page"
    },
    "httpCalls": [
      {
        "url": "https://api.notion.com/v1/pages",
        "method": "POST"
      }
    ]
  }
}
